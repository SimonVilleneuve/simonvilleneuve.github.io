var A=window.A||{};A.A15={isTouch:function(){return!!("ontouchstart"in window||navigator.msMaxTouchPoints)},isIE:function(){var t=window.navigator.userAgent;return!!(t.indexOf("MSIE ")>0||t.match(/Trident.*rv[ :]?11\./))},setAttrs:function(){jQuery("html").attr("data-touch-on",this.isTouch()?"":null).attr("data-ie-on",this.isIE()?"":null)},quickTap:function(){this.isTouch()&&jQuery("body").on("touchend","[data-quicktap]",function(t){t.preventDefault(),jQuery(this).click()})},headSafeZone:60,headIsShown:!1,changeHead:function(t){this.headIsShown!=t&&(this.headIsShown=t,jQuery(".popup-menu").attr("data-show-on",t?"":null))},dynoHeadFreeze:!1,dynoHead:function(){!function(t,e,o,n){"use strict";var a=null,i=250;o(t).scroll(function(){a&&clearTimeout(a),a=setTimeout(u,i)});var r=function(){return Math.max(e.body.clientHeight,e.documentElement.clientHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.scrollHeight,e.documentElement.scrollHeight)},l=0,s=n.headSafeZone,c=!1,u=function(){if(!n.dynoHeadFreeze){var e=o(t).scrollTop(),a=e>s,i=!(e+o(t).height()>=r()-s),u=c&&c>=o(t).height()-n.headSafeZone;u||(n.changeHead(a&&i),l=e)}},h=null,f=250;n.isTouch()||o(e).on("mousemove",function(t){h=setTimeout(function(){d(t)},f)});var d=function(e){if(h&&clearTimeout(h),c=e.clientY,o(t).scrollTop()<=n.headSafeZone||o(t).scrollTop()+o(t).height()>=r()){var a=c&&c>=o(t).height()-n.headSafeZone;n.changeHead(a)}};jQuery("html").attr("data-no-scroll",r()===o(t).height()?"":null)}(window,document,jQuery,this)},autoLoad:function(){this.setAttrs(),this.quickTap()}},A.Box={getNext:function(t,e){var t=e?t.prev(this.selector):t.next(this.selector);return t.length?t:!1},go:function(t){var e=window.pageYOffset;A.A15.dynoHeadFreeze=!0,jQuery("html").attr("data-stage-on",!0);var o=jQuery(this),n=o.data(),a=jQuery('<div class="stage" data-quicktap><div class="stage-wrap"></div><i class="if-angle-right" data-next data-quicktap></i><i class="if-angle-left" data-prev data-quicktap></i></div>'),i=a.children(".stage-wrap");i.html(A.Box.getContent(n.zoomOn,n.zoomType)),jQuery("body").append(a),window.scroll(window.pageXOffset,0);var r=A.Box.getNext(o),l=A.Box.getNext(o,!0);r&&a.find("[data-next]").attr("data-on",!0),l&&a.find("[data-prev]").attr("data-on",!0),a.on("click",function(t){a.remove(),jQuery("html").attr("data-stage-on",null),A.A15.dynoHeadFreeze=!1,window.scroll(window.pageXOffset,e),t.target.hasAttribute("data-next")&&r&&r.click(),t.target.hasAttribute("data-prev")&&l&&l.click()}),jQuery(document).one("keyup",function(t){var e="[data-next]";37==t.which&&(e="[data-prev]"),27==t.which&&(e="div"),a.find(e).trigger("click")})},getContent:function(t,e){var o="",n='class="stage-content"',a=document.createElement("a");a.href=t;var i=a.pathname;switch(A.A15.isIE()&&(i="/"+i),e&&e.toLowerCase()){case"youtube":o="<iframe "+n+' allowfullscreen src="//www.youtube.com/embed'+i+'?autoplay=1"></iframe>';break;case"vimeo":o="<iframe "+n+' src="//player.vimeo.com/video'+i+'?autoplay=1"></iframe>';break;default:o="<img "+n+' src="'+t+'">'}return o},selector:"[data-zoom-on]",autoLoad:function(){jQuery(".main").on("click",this.selector,this.go)}},A.Form={notEmail:function(t){return!t.match(/[a-zA-Z0-9_\.\-]+\@([a-zA-Z0-9\-]+\.)+[a-zA-Z0-9]{2,}/)},notFilled:function(t){return!t.length},errTrggr:"errors:aform",initItem:function(t){var e=jQuery(t).find("input,textarea");if(e.length){var o=e.data();if(e.$hl=jQuery("<span/>"),e.$hl.attr("data-help",o.help).insertAfter(e),"textarea"==e[0].type&&e.attr("rows",1).autosize().blur(),o.ph=o.placeholder){e.Val=function(){return e.val()==o.ph?"":e.val()};var n=function(){e.val()||e.val(o.ph)},a=function(){e.val(e.Val())};e.val(o.ph).focus(a).blur(n)}e.$fm=e.parents(".aform").on("check:aform",function(){A.Form.checkItem(e)}),e.$fm.on("serial:aform",function(){e.val(e.Val())})}},checkItem:function(t){var e=t.data(),o=t.Val();t.$hl.attr("data-error",null),e.required&&A.Form.notFilled(o)&&t.$hl.attr("data-error",e.required),e.email&&A.Form.notEmail(o)&&t.$hl.attr("data-error",e.email),t.$hl.attr("data-error")&&t.$fm.data(A.Form.errTrggr,!0)},initSubmit:function(el){var $el=jQuery(el),$fm=$el.parents(".aform"),submitMe=function(){var __=$fm.trigger("serial:aform").serialize();__+="&id"+eval(-1)+"=",$el.remove(),jQuery.post($fm.attr("action"),__,function(t){t&&$fm.fadeOut(function(){$fm.replaceWith(t).fadeIn()})})},onClick=function(){$fm.data(A.Form.errTrggr,!1).trigger("check:aform"),$fm.data(A.Form.errTrggr)||submitMe()};$el.on("mouseup",onClick)},autoLoad:function(){var t=this;jQuery(".aform-item").each(function(){t.initItem(this)}),jQuery(".aform [data-submit]").each(function(){t.initSubmit(this)})}},A.Twitter={get:function(t,e){jQuery.getJSON("twitter.php?id="+t,function(t){var o=t[0].tweet;e&&o&&e(o)})},autoLoad:function(){jQuery("[data-tweet-from]").each(function(){var t=jQuery(this),e=function(e){t.html(e)};A.Twitter.get(t.attr("data-tweet-from")||"helloalaja",e)})}},$(document).on("click",'a[rel*="external"],a[href^="http"]',function(){return window.open(this.href),!1}),function(){jQuery.noConflict(),jQuery(document).ready(function(){for(var t in A)A.hasOwnProperty(t)&&A[t]&&A[t].autoLoad&&A[t].autoLoad()})}(jQuery),A.PackedPlugins={autoLoad:function(){jQuery.fn.smoothScroll&&jQuery("a").smoothScroll({speed:808})}},function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(t){return t.replace(/(:|\.)/g,"\\$1")}var o={},n=function(e){var o=[],n=!1,a=e.dir&&"left"===e.dir?"scrollLeft":"scrollTop";return this.each(function(){if(this!==document&&this!==window){var e=t(this);0<e[a]()?o.push(this):(e[a](1),(n=0<e[a]())&&o.push(this),e[a](0))}}),o.length||this.each(function(){"BODY"===this.nodeName&&(o=[this])}),"first"===e.el&&1<o.length&&(o=[o[0]]),o};t.fn.extend({scrollable:function(t){return t=n.call(this,{dir:t}),this.pushStack(t)},firstScrollable:function(t){return t=n.call(this,{el:"first",dir:t}),this.pushStack(t)},smoothScroll:function(o,n){if(o=o||{},"options"===o)return n?this.each(function(){var e=t(this),e=t.extend(e.data("ssOpts")||{},n);t(this).data("ssOpts",e)}):this.first().data("ssOpts");var a=t.extend({},t.fn.smoothScroll.defaults,o),i=t.smoothScroll.filterPath(location.pathname);return this.unbind("click.smoothscroll").bind("click.smoothscroll",function(o){var n=t(this),r=t.extend({},a,n.data("ssOpts")||{}),l=a.exclude,s=r.excludeWithin,c=0,u=0,h=!0,f={},d=location.hostname===this.hostname||!this.hostname,m=r.scrollTarget||t.smoothScroll.filterPath(this.pathname)===i,p=e(this.hash);if(r.scrollTarget||d&&m&&p){for(;h&&c<l.length;)n.is(e(l[c++]))&&(h=!1);for(;h&&u<s.length;)n.closest(s[u++]).length&&(h=!1)}else h=!1;h&&(r.preventDefault&&o.preventDefault(),t.extend(f,r,{scrollTarget:r.scrollTarget||p,link:this}),t.smoothScroll(f))}),this}}),t.smoothScroll=function(e,n){if("options"===e&&"object"==typeof n)return t.extend(o,n);var a,i,r,l,s;l=0;var c="offset";s="scrollTop";var u={};r={},"number"==typeof e?(a=t.extend({link:null},t.fn.smoothScroll.defaults,o),r=e):(a=t.extend({link:null},t.fn.smoothScroll.defaults,e||{},o),a.scrollElement&&(c="position","static"===a.scrollElement.css("position")&&a.scrollElement.css("position","relative"))),s="left"===a.direction?"scrollLeft":s,a.scrollElement?(i=a.scrollElement,/^(?:HTML|BODY)$/.test(i[0].nodeName)||(l=i[s]())):i=t("html, body").firstScrollable(a.direction),a.beforeScroll.call(i,a),r="number"==typeof e?e:n||t(a.scrollTarget)[c]()&&t(a.scrollTarget)[c]()[a.direction]||0,u[s]=r+l+a.offset,l=a.speed,"auto"===l&&(s=u[s]-i.scrollTop(),0>s&&(s*=-1),l=s/a.autoCoefficient),r={duration:l,easing:a.easing,complete:function(){a.afterScroll.call(a.link,a)}},a.step&&(r.step=a.step),i.length?i.stop().animate(u,r):a.afterScroll.call(a.link,a)},t.smoothScroll.version="1.5.3",t.smoothScroll.filterPath=function(t){return(t||"").replace(/^\//,"").replace(/(?:index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")},t.fn.smoothScroll.defaults={exclude:[],excludeWithin:[],offset:0,direction:"top",scrollElement:null,scrollTarget:null,beforeScroll:function(){},afterScroll:function(){},easing:"swing",speed:400,autoCoefficient:2,preventDefault:!0}}),function(t){var e,o={className:"autosizejs",append:"",callback:!1},n="hidden",a="border-box",i="lineHeight",r='<textarea tabindex="-1" style="position:absolute;top:-999px;left:0;right:auto;bottom:auto;border:0;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box;word-wrap:break-word;height:0 !important;min-height:0 !important;overflow:hidden;"/>',l=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],s="oninput",c="onpropertychange",u=t(r).data("autosize",!0)[0];u.style.lineHeight="99px","99px"===t(u).css(i)&&l.push(i),u.style.lineHeight="",t.fn.autosize=function(i){return i=t.extend({},o,i||{}),u.parentNode!==document.body&&t(document.body).append(u),this.each(function(){function o(){e=m,u.className=i.className,t.each(l,function(t,e){u.style[e]=p.css(e)})}function r(){var t,a,r;if(e!==m&&o(),!f){f=!0,u.value=m.value+i.append,u.style.overflowY=m.style.overflowY,r=parseInt(m.style.height,10),u.style.width=Math.max(p.width(),0)+"px",u.scrollTop=0,u.scrollTop=9e4,t=u.scrollTop;var l=parseInt(p.css("maxHeight"),10);l=l&&l>0?l:9e4,t>l?(t=l,a="scroll"):h>t&&(t=h),t+=g,m.style.overflowY=a||n,r!==t&&(m.style.height=t+"px",v&&i.callback.call(m)),setTimeout(function(){f=!1},1)}}var h,f,d,m=this,p=t(m),g=0,v=t.isFunction(i.callback);p.data("autosize")||((p.css("box-sizing")===a||p.css("-moz-box-sizing")===a||p.css("-webkit-box-sizing")===a)&&(g=p.outerHeight()-p.height()),h=Math.max(parseInt(p.css("minHeight"),10)-g,p.height()),d="none"===p.css("resize")||"vertical"===p.css("resize")?"none":"horizontal",p.css({overflow:n,overflowY:n,wordWrap:"break-word",resize:d}).data("autosize",!0),c in m?s in m?m[s]=m.onkeyup=r:m[c]=r:m[s]=r,t(window).resize(function(){f=!1,r()}),p.bind("autosize",function(){f=!1,r()}),r())})}}(window.jQuery||window.Zepto);